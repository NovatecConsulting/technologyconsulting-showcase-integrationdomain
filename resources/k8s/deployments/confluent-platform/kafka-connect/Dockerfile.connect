FROM confluentinc/cp-server-connect-base:5.5.0
RUN mkdir -p /usr/share/secret-provider
RUN curl https://github.com/lensesio/secret-provider/releases/download/2.1.6/secret-provider-2.1.6-all.jar -o /usr/share/secret-provider/secret-provider-2.1.6-all.jar
ENV CLASSPATH="/usr/share/secret-provider/secret-provider-2.1.6-all.jar"
ENV CUB_CLASSPATH="/etc/confluent/docker/docker-utils.jar:/usr/share/secret-provider/secret-provider-2.1.6-all.jar"
ARG CONNECTORS=""
RUN for c in ${CONNECTORS}; do confluent-hub install --no-prompt $c; done;

COPY /resources/k8s/deployments/confluent-platform/kafka-connect/include/etc/confluent/docker/ensure /etc/confluent/docker/




